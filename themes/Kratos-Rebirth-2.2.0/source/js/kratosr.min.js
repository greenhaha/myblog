"use strict";function _regenerator(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,o,r,a){var s=o&&o.prototype instanceof c?o:c,l=Object.create(s.prototype);return _regeneratorDefine2(l,"_invoke",function(n,o,r){var a,c,s,l=0,d=r||[],u=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,s=e,f.n=n,i}};function m(n,o){for(c=n,s=o,t=0;!u&&l&&!r&&t<d.length;t++){var r,a=d[t],m=f.p,v=a[2];n>3?(r=v===o)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((r=n<2&&m<a[1])?(c=0,f.v=o,f.n=a[1]):m<v&&(r=n<3||a[0]>o||o>v)&&(a[4]=n,a[5]=o,f.n=v,c=0))}if(r||n>1)return i;throw u=!0,o}return function(r,d,v){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,v),c=d,s=v;(t=c<2?e:s)||!u;){a||(c?c<3?(c>1&&(f.n=-1),m(c,s)):f.n=s:f.v=s);try{if(l=2,a){if(c||(r="next"),t=a[r]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a["return"])&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),c=1);a=e}else if((t=(u=f.n<0)?s:n.call(o,f))!==i)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:u}}}(n,r,a),!0),l}var i={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(_regeneratorDefine2(t={},o,function(){return this}),t),u=l.prototype=c.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_regeneratorDefine2(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=l,_regeneratorDefine2(u,"constructor",l),_regeneratorDefine2(l,"constructor",s),s.displayName="GeneratorFunction",_regeneratorDefine2(l,r,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,r,"Generator"),_regeneratorDefine2(u,o,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:a,m:f}})()}function _regeneratorDefine2(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}_regeneratorDefine2=function(e,t,n,o){if(t)r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var a=function(t,n){_regeneratorDefine2(e,t,function(e){return this._invoke(t,n,e)})};a("next",0),a("throw",1),a("return",2)}},_regeneratorDefine2(e,t,n,o)}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,o,r,i,c,"next",e)}function c(e){asyncGeneratorStep(a,o,r,i,c,"throw",e)}i(void 0)})}}window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},window.copyCode=window.copyCode||function(e,t){var n=document.getElementById(t);if(n){var o=n.innerText;navigator.clipboard.writeText(o);var r=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;成功~',setTimeout(function(){e.innerHTML=r},3e3)}},function(){var e,t=function(){var e=_asyncToGenerator(_regenerator().m(function t(){var e,n;return _regenerator().w(function(t){for(;;)switch(t.n){case 0:return n=((null===(e=window.kr)||void 0===e?void 0:e.siteRoot)||"/")+"config/main.json",t.n=1,fetch(n);case 1:return t.n=2,t.v.json();case 2:return t.a(2,t.v)}},t)}));return function(){return e.apply(this,arguments)}}(),n="",o=function(e){var t,n=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],o=e/1e3,r=Math.floor(o/60/60/24),a=Math.floor(o/60/60-24*r),i=Math.floor(o/60-1440*r-60*a),c=Math.floor(o-86400*r-3600*a-60*i),s=r.toString(),l=a.toString(),d=i.toString(),u=c.toString();return n?(s&&1===s.length&&(s="0"+s),l&&1===l.length&&(l="0"+l),d&&1===d.length&&(d="0"+d),u&&1===u.length&&(u="0"+u),t=s+"天"+l+"小时"+d+"分"+u+"秒"):t=r<540?r<60?s+"天":Math.floor(r/30).toString()+"个月":Math.floor(r/365).toString()+"年",t},r=function(e,t){var n=0;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(o,r)},t||0)}},a=function(){var e,t;e=document.getElementById("krw-toc"),t=function(){var t=e.getElementsByClassName("toc-item"),n=[];try{Array.from(t).forEach(function(e){var t=e.querySelector(".toc-link"),o=decodeURI(t.getAttribute("href"));if("#"!=o.substring(0,1))throw new Error("TOC 小标题链接无效，格式无限");var r=document.getElementById(o.substring(1));if(!r)throw new Error("TOC 小标题链接无效，未找到相关引用");r.setAttribute("data-toc-id",n.length),n.push({at:r,el:e})})}catch(h){return console.log("错误：",h.message),void Array.from(t).forEach(function(e){e.classList.add("show")})}var o=-1,a=function(e){if(o!==e){if(-1!==o){n[o].el.classList.remove("active"),n[o].el.classList.remove("show");for(var t=n[o].el;!t.classList.contains("toc");)t.classList.contains("toc-item")&&t.classList.remove("show"),t=t.parentNode}if(-1!==e){n[e].el.classList.add("active"),n[e].el.classList.add("show");for(var r=n[e].el;!r.classList.contains("toc");)r.classList.contains("toc-item")&&r.classList.add("show"),r=r.parentNode}o=e}};if("IntersectionObserver"in window){var i=r(function(e,t){t===window.scrollY?window.requestAnimationFrame(function(){a(e)}):i(e,window.scrollY)},100),c=new IntersectionObserver(function(e){var t=null;e.forEach(function(e){var n=Number.parseInt(e.target.getAttribute("data-toc-id"),10);!e.isIntersecting&&e.boundingClientRect.top<=e.rootBounds.top?t=n:e.isIntersecting&&e.boundingClientRect.bottom<e.rootBounds.top+e.rootBounds.height/2&&1===e.intersectionRatio&&(t=n-1)}),null!==t&&i(t,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});n.forEach(function(e){c.observe(e.at)}),window.addEventListener("pjax:before",function(){c.disconnect(),n.length=0},{once:!0})}else{var s=function(){n.forEach(function(e){e.h=e.at.getBoundingClientRect().top+window.scrollY-61})};s();var l=function(){var e;e=!Number.isInteger(o)||o<0||o>n.length-1?0:o;var t=window.scrollY;if(t>=n[e].h)if(t>=n[n.length-1].h)e=n.length-1;else for(;t>=n[e+1].h;)e++;else for(;t<n[e].h&&!(--e<0););return e},d=r(function(){window.requestAnimationFrame(function(){a(l())})},100),u=r(function(){s(),window.requestAnimationFrame(function(){a(l())})},100);window.addEventListener("resize",u),window.addEventListener("scroll",d),window.addEventListener("pjax:before",function(){window.removeEventListener("resize",u),window.removeEventListener("scroll",d),n.length=0},{once:!0})}var f=document.getElementsByClassName("toc-progress-bar")[0],m=document.querySelector(".kratos-post-content"),v=function(){if(m){var e=window.scrollY||document.documentElement.scrollTop,t=m.clientHeight,n=document.documentElement.clientHeight,o=m.offsetTop,r=t>n?t-n:document.documentElement.scrollHeight-n,a=Math.max(0,Math.min((e-o)/r,1)),i=Math.round(100*a);f.style.width=(100*a).toString()+"%",f.setAttribute("aria-valuenow",i)}};window.addEventListener("scroll",function(){window.requestAnimationFrame(v)}),v()},e&&(null!==e.offsetParent?t():"IntersectionObserver"in window&&new IntersectionObserver(t,{threshold:0,once:!0}).observe(e)),n=document.title,document.querySelectorAll("figure.highlight").forEach(function(e,t){e.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0].setAttribute("id","code-".concat(t)),e.innerHTML+='<button class="copy" onclick="copyCode(this, \'code-'.concat(t,'\')">\n                <i class="fa fa-copy"></i>&nbsp;复制\n            </button>')}),"undefined"!=typeof $.fancybox&&($.fancybox.defaults.hash=!1,$(".kratos-hentry").each(function(e){$(this).find("img").each(function(){if(!($(this).parent().hasClass("fancybox")||$(this).parent().hasClass("qrcode")||$(this).parent().is("a"))){var e=this.alt;e&&$(this).after('<span class="caption">'+e+"</span>"),$(this).wrap('<a rel="gallery" href="'+this.src+'" data-fancybox="gallery" data-caption="'+e+'"></a>')}})}),$(".fancybox").fancybox()),function(){var e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),n=e&&"IntersectionObserver"in window,o=document.querySelector(".post-comments.lazy-load"),r=function(){window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),"undefined"!=typeof load_comm&&null!==load_comm&&(window.loadCommentsEventHandler=window.requestIdleCallback(load_comm),load_comm=null)};if(e&&!t&&n&&null!==o){var a=new IntersectionObserver(function(e){e[0].isIntersecting&&(r(),a.disconnect())},{threshold:0});a.observe(o)}else r()}()},i=function(t){!function(e){for(var t=document.getElementsByClassName("kratos-entry-thumb-new-img"),n=e.cover&&e.cover.randomAmount||20,o=e.cover&&e.cover.baseUrl||"https://cdn.jsdelivr.net/npm/hexo-theme-kratos-rebirth@latest/source/images/thumb/",r=e.cover&&e.cover.filenameTemplate||"thumb_{no}.webp",a=new Array(n+1),i=function(){for(var e,t=5;t>0&&(e=Math.floor(Math.random()*n+1),a[e]);)t--;if(t<=0){e=-1;for(var o=1;o<=n;o++)if(!a[o]){e=o;break}if(-1===e){for(var r=1;r<=n;r++)a[r]=!1;e=Math.floor(Math.random()*n+1)}}return a[e]=!0,e},c=0,s=t.length;c<s;c++)if(!$(t[c]).attr("src")){var l=i(),d=r.replace("{no}",l.toString()),u=void 0;u=d.includes("//")?d:"/"===o.substring(o.length-1)?o+d:o+"/"+d,$(t[c]).attr("src",u)}}(t),function(t){e="\n\n-------------------------\n".concat(t.copyrightNotice,"\n作者：").concat(document.querySelector("meta[name='author']").getAttribute("content"),"\n来源：").concat(document.title,"\n链接：").concat(window.location.href,"\n")}(t),function(e){if(e.expire_day){var t=document.getElementById("expire-alert");if(t){var n=t.querySelector("time"),r=new Date(parseInt(n.getAttribute("datetime"))),a=Date.now()-r;a>24*e.expire_day*3600*1e3&&(n.innerText=o(a,!1),t.classList.remove("hidden"))}}}(t)};function c(){var r,s,l;document.removeEventListener("DOMContentLoaded",c,!1),window.removeEventListener("load",c,!1),t().then(function(t){!function(t){t.copyrightNotice&&(document.body.oncopy=function(t){if(e){var n=window.getSelection().toString();n.length>150&&(t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",n+e))}})}(t),function(e){if(e.siteLeaveEvent){var t,o=$('[rel="icon"]').attr("href");document.addEventListener("visibilitychange",function(){document.hidden?(document.title=e.leaveTitle,e.leaveLogo&&$('[rel="icon"]').attr("href",e.leaveLogo),clearTimeout(t)):(document.title=e.returnTitle+" "+n,e.leaveLogo&&$('[rel="icon"]').attr("href",o),t=setTimeout(function(){document.title=n,t=0},2e3))})}}(t),function(e){var t=new Date(e.createTime),n=document.getElementById("span_dt");setInterval(function(){n.innerText=o(Date.now()-t)},1e3)}(t),function(e){$(document).on("click",".donate",function(){layer.open({type:1,area:["300px","370px"],title:e.donateBtn,resize:!1,scrollbar:!1,content:'<div class="donate-box"><div class="meta-pay text-center"><strong>'+e.scanNotice+'</strong></div><div class="qr-pay text-center"><img class="pay-img" id="alipay_qr" src="'+e.qr_alipay+'"><img class="pay-img d-none" id="wechat_qr" src="'+e.qr_wechat+'"></div><div class="choose-pay text-center mt-2"><input id="alipay" type="radio" name="pay-method" checked><label for="alipay" class="pay-button"><img src="/images/alipay.webp"></label><input id="wechatpay" type="radio" name="pay-method"><label for="wechatpay" class="pay-button"><img src="/images/wechat.webp"></label></div></div>'}),$(".choose-pay input[type='radio']").click(function(){var e=$(this).attr("id");"alipay"==e&&($(".qr-pay #alipay_qr").removeClass("d-none"),$(".qr-pay #wechat_qr").addClass("d-none")),"wechatpay"==e&&($(".qr-pay #alipay_qr").addClass("d-none"),$(".qr-pay #wechat_qr").removeClass("d-none"))})})}(t),function(e){if(e.topNavScrollToggle){var t=window.innerHeight,n=!1;window.addEventListener("wheel",function(){window.requestAnimationFrame(function(){t<window.scrollY?n||(document.body.classList.add("nav-up"),n=!0):t>window.scrollY&&n&&(document.body.classList.remove("nav-up"),n=!1),t=window.scrollY})})}}(t),i(t),window.addEventListener("pjax:complete",function(){i(t)})}),r=!1,s=function(){window.requestAnimationFrame(function(){window.scrollY>200?r||(document.body.classList.add("scroll-down"),r=!0):r&&(document.body.classList.remove("scroll-down"),r=!1)})},$(".gotop-box").on("click",function(e){return $("html, body").animate({scrollTop:$("html").offset().top},500),!1}),s(),window.addEventListener("scroll",s),(l=$("#kratos-menu-wrap").clone()).attr({id:"offcanvas-menu"}),l.find("> ul").attr({id:""}).addClass("ul-me"),$("#kratos-page").prepend(l),$(".js-kratos-nav-toggle").on("click",function(){$(".nav-toggle").hasClass("toon")?($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px")):($(".nav-toggle").addClass("toon"),$("#offcanvas-menu").css("right","0px"))}),$("#offcanvas-menu").css("height",$(window).height()),$("#offcanvas-menu").css("right","-240px"),$(window).resize(function(){var e=$(window);$("#offcanvas-menu").css("height",e.height()),e.width()>769&&$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))}),$(document).click(function(e){var t=$("#offcanvas-menu,.js-kratos-nav-toggle");t.is(e.target)||0!==t.has(e.target).length||$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))}),$(document).on("click",".xHeading",function(e){$(this).next().slideToggle(300),$(this).parent(".xControl").hasClass("active")?$(this).parent(".xControl").removeClass("active"):$(this).parent(".xControl").addClass("active"),e.preventDefault()}),$(document).on("click",".share",function(){$(".share-wrap").fadeToggle("slow")}),$(document).on("click","a[class=toc-link]",function(){return $("html, body").animate({scrollTop:$(decodeURI($(this).attr("href"))).offset().top-60},500),!1}),a()}window.addEventListener("pjax:complete",function(){a(),"undefined"!=typeof MathJax&&MathJax.Hub.Typeset()}),"complete"===document.readyState?setTimeout(c):(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1))}();
//# sourceMappingURL=../maps/kratosr.min.js.map
